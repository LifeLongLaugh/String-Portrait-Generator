<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>String Portrait Generator</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		:root {
			--primary: #4361ee;
			--primary-dark: #3a56d4;
			--secondary: #7209b7;
			--accent: #f72585;
			--dark: #1a1a2e;
			--darker: #0d0d19;
			--light: #f8f9fa;
			--gray: #6c757d;
			--light-gray: #e9ecef;
			--card-bg: #ffffff;
			--success: #4cc9f0;
			--warning: #f8961e;
			--shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
			--shadow-hover: 0 15px 35px rgba(0, 0, 0, 0.15);
			--transition: all 0.3s ease;
			--border-radius: 16px;
			--border-radius-sm: 8px;
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}

		body {
			background: linear-gradient(135deg, var(--darker), var(--dark));
			color: var(--light);
			line-height: 1.6;
			min-height: 100vh;
			padding: 20px;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		#app {
			width: 100%;
			max-width: 1000px;
			margin: 0 auto;
		}

		header {
			text-align: center;
			padding: 30px 20px;
			margin-bottom: 20px;
			position: relative;
			overflow: hidden;
		}

		.header-bg {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: radial-gradient(circle at top right, rgba(115, 9, 183, 0.2), transparent 70%),
									radial-gradient(circle at bottom left, rgba(67, 97, 238, 0.2), transparent 70%);
			z-index: 1;
		}

		header h1 {
			font-size: 2.8rem;
			margin-bottom: 15px;
			background: linear-gradient(90deg, var(--success), var(--primary));
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
			position: relative;
			z-index: 2;
		}

		.photo-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: var(--border-radius);
			padding: 25px;
			margin-bottom: 25px;
			box-shadow: var(--shadow);
			display: flex;
			flex-direction: column;
			gap: 20px;
		}

		.file-input-container {
			display: flex;
			flex-direction: column;
			gap: 15px;
		}

		.file-tip {
			background: rgba(76, 201, 240, 0.1);
			padding: 12px 15px;
			border-radius: var(--border-radius-sm);
			font-size: 0.9rem;
			color: var(--success);
			display: flex;
			align-items: center;
			gap: 10px;
		}

		#fileInput {
			background: var(--primary);
			color: white;
			padding: 12px 20px;
			border-radius: var(--border-radius-sm);
			cursor: pointer;
			border: none;
			transition: var(--transition);
			font-weight: 500;
			text-align: center;
		}

		#fileInput:hover {
			background: var(--primary-dark);
			transform: translateY(-2px);
			box-shadow: var(--shadow-hover);
		}

		.canvas-container {
			position: relative;
			width: 100%;
			height: 400px;
			background: rgba(0, 0, 0, 0.3);
			border-radius: var(--border-radius-sm);
			overflow: hidden;
			display: flex;
			justify-content: center;
			align-items: center;
			margin: 10px 0;
		}

		canvas {
			max-width: 100%;
			max-height: 100%;
			display: block;
			background: #1e1e2e;
			box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
		}

		.position-tip {
			position: absolute;
			bottom: 15px;
			left: 0;
			right: 0;
			text-align: center;
			background: rgba(248, 150, 30, 0.2);
			color: var(--warning);
			padding: 8px;
			font-size: 0.9rem;
			border-radius: var(--border-radius-sm);
			margin: 0 20px;
		}

		.controls-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: var(--border-radius);
			padding: 25px;
			margin-bottom: 25px;
			box-shadow: var(--shadow);
		}

		.controls-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 25px;
			margin-bottom: 25px;
		}

		.control-group {
			display: flex;
			flex-direction: column;
			gap: 15px;
		}

		.control-card {
			background: rgba(0, 0, 0, 0.2);
			border-radius: var(--border-radius-sm);
			padding: 18px;
		}

		.control-card h3 {
			display: flex;
			align-items: center;
			gap: 10px;
			margin-bottom: 15px;
			color: var(--success);
		}

		.control-card h3 i {
			background: rgba(76, 201, 240, 0.15);
			width: 30px;
			height: 30px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.slider-group {
			display: flex;
			flex-direction: column;
			gap: 8px;
			margin-bottom: 15px;
		}

		.slider-group label {
			display: flex;
			justify-content: space-between;
			font-weight: 500;
		}

		.slider-group span {
			color: var(--success);
			font-weight: 600;
		}

		input[type="range"] {
			width: 100%;
			height: 8px;
			-webkit-appearance: none;
			background: rgba(255, 255, 255, 0.1);
			border-radius: 10px;
			outline: none;
		}

		input[type="range"]::-webkit-slider-thumb {
			-webkit-appearance: none;
			width: 20px;
			height: 20px;
			background: var(--primary);
			border-radius: 50%;
			cursor: pointer;
			transition: var(--transition);
		}

		input[type="range"]::-webkit-slider-thumb:hover {
			background: var(--primary-dark);
			transform: scale(1.1);
		}

		.action-buttons {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
			gap: 15px;
			margin-top: 20px;
		}

		button {
			padding: 14px;
			border-radius: var(--border-radius-sm);
			border: none;
			background: var(--primary);
			color: white;
			font-weight: 600;
			cursor: pointer;
			transition: var(--transition);
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
		}

		button:hover {
			background: var(--primary-dark);
			transform: translateY(-3px);
			box-shadow: var(--shadow-hover);
		}

		#startBtn { background: #10b981; }
		#startBtn:hover { background: #059669; }
		
		#stopBtn { background: #f59e0b; }
		#stopBtn:hover { background: #d97706; }
		
		#resetBtn { background: #ef4444; }
		#resetBtn:hover { background: #dc2626; }

		.thread-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: var(--border-radius);
			padding: 25px;
			margin-bottom: 25px;
			box-shadow: var(--shadow);
		}

		.canvas-status {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 15px;
		}

		.canvas-status h3 {
			display: flex;
			align-items: center;
			gap: 10px;
			color: var(--success);
		}

		.canvas-status h3 i {
			background: rgba(76, 201, 240, 0.15);
			width: 30px;
			height: 30px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.status {
			padding: 8px 15px;
			background: rgba(76, 201, 240, 0.1);
			border-radius: var(--border-radius-sm);
			font-weight: 500;
		}

		.status span {
			color: var(--success);
			font-weight: 700;
		}

		.export-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: var(--border-radius);
			padding: 25px;
			box-shadow: var(--shadow);
		}

		.export-section h3 {
			display: flex;
			align-items: center;
			gap: 10px;
			margin-bottom: 20px;
			color: var(--success);
		}

		.export-section h3 i {
			background: rgba(76, 201, 240, 0.15);
			width: 30px;
			height: 30px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.export-buttons {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 15px;
		}

		#exportSeqBtn { background: #8b5cf6; }
		#exportSeqBtn:hover { background: #7c3aed; }
		
		#exportPNGBtn { background: #06b6d4; }
		#exportPNGBtn:hover { background: #0891b2; }

		footer {
			text-align: center;
			padding: 30px 0 10px;
			color: var(--light-gray);
			font-size: 0.9rem;
		}

		/* Responsive styles */
		@media (max-width: 768px) {
			header h1 {
				font-size: 2.2rem;
			}
			
			.canvas-container {
				height: 300px;
			}
			
			.controls-grid {
				grid-template-columns: 1fr;
			}
		}

		@media (max-width: 480px) {
			header h1 {
				font-size: 1.8rem;
			}
			
			.photo-section, .controls-section, 
			.thread-section, .export-section {
				padding: 20px;
			}
			
			.canvas-container {
				height: 250px;
			}
			
			button {
				padding: 12px;
				font-size: 0.9rem;
			}
		}
	</style>
</head>
<body>
	<div id="app">
		<header>
			<div class="header-bg"></div>
			<h1><i class="fas fa-paint-brush"></i> String Portrait Generator</h1>
		</header>

		<!-- Photo Section -->
		<section class="photo-section">
			<div class="file-input-container">
				<div class="file-tip">
					<i class="fas fa-lightbulb"></i> Choose a high-contrast photo for best results
				</div>
				<input id="fileInput" type="file" accept="image/*" value="Choose Photo" />
			</div>
			
			<h3><i class="fas fa-image"></i> Source Image</h3>
			<div class="canvas-container">
				<canvas id="imageCanvas" width="600" height="600"></canvas>
				<div class="position-tip">
					<i class="fas fa-hand-point-up"></i> Drag to position image inside the oval
				</div>
			</div>
		</section>

		<!-- Controls Section -->
		<section class="controls-section">
			<h3><i class="fas fa-sliders-h"></i> Configuration</h3>
			<div class="controls-grid">
				<div class="control-group">
					<div class="control-card">
						<h3><i class="fas fa-expand-alt"></i> Oval Dimensions</h3>
						<div class="slider-group">
							<label>
								<i class="fas fa-arrows-alt-h"></i> Width: 
								<span id="ovalWval">100%</span>
							</label>
							<input id="ovalW" type="range" min="10" max="100" value="100" />
						</div>
						
						<div class="slider-group">
							<label>
								<i class="fas fa-arrows-alt-v"></i> Height: 
								<span id="ovalHval">66%</span>
							</label>
							<input id="ovalH" type="range" min="10" max="100" value="66" />
						</div>
					</div>
				</div>
				
				<div class="control-group">
					<div class="control-card">
						<h3><i class="fas fa-cogs"></i> Generator Settings</h3>
						<div class="slider-group">
							<label>
								<i class="fas fa-thumbtack"></i> No. of Nails: 
								<span id="nailCountVal">180</span>
							</label>
							<input id="nailCount" type="range" min="90" max="400" value="180" />
						</div>
						
						<div class="slider-group">
							<label>
								<i class="fas fa-wave-square"></i> Max Strokes: 
								<span id="maxLinesVal">3000</span>
							</label>
							<input id="maxLines" type="range" min="50" max="8000" value="3000" />
						</div>
						
						<div class="slider-group">
							<label>
								<i class="fas fa-thread"></i> Thread thickness: 
								<span id="thicknessVal">1</span>
							</label>
							<input id="thickness" type="range" min="0.3" max="6" step="0.1" value="1" />
						</div>
						
						<div class="slider-group">
							<label>
								<i class="fas fa-thread"></i> Thread Brightness: 
								<span id="brightnessVal">15</span>
							</label>
							<input id="brightness" type="range" min="0" max="255" step="1" value="15" />
						</div>
					</div>
				</div>
			</div>
			
			<div class="action-buttons">
				<button id="startBtn"><i class="fas fa-play"></i> Start</button>
				<button id="stopBtn"><i class="fas fa-stop"></i> Stop</button>
				<button id="resetBtn"><i class="fas fa-redo"></i> Reset</button>
			</div>
		</section>

		<!-- Thread Art Section -->
		<section class="thread-section">
			<div class="canvas-status">
				<h3><i class="fas fa-palette"></i> Generated Thread Art</h3>
				<div class="status">
					<i class="fas fa-link"></i> Connections: <span id="connectionsCount">0</span>
				</div>
			</div>
			
			<div class="canvas-container">
				<canvas id="workCanvas" width="600" height="600"></canvas>
			</div>
		</section>

		<!-- Export Section -->
		<section class="export-section">
			<h3><i class="fas fa-download"></i> Export Results</h3>
			<div class="export-buttons">
				<button id="exportSeqBtn"><i class="fas fa-file-export"></i> Export Sequence (.txt)</button>
				<button id="exportPNGBtn"><i class="fas fa-image"></i> Export PNG</button>
			</div>
		</section>

		<footer>
			<small>Built with plain HTML / CSS / vanilla JS. No libraries.</small>
		</footer>
	</div>

	<script src="app.js"></script>
</body>
</html>